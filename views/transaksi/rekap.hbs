<div class="flex flex-col p-2 min-h-[calc(100vh-3.5rem)] flex-grow mt-2 bg-white">
    <form method="post" enctype="multipart/form-data">
        <input type="file" name="sheet" id="sheet">
        <button type="submit">Export</button>
    </form>
    <div class="h-48 w-full overflow-y-scroll">
        <table class="w-full">
            {{#each transaksis}}
                <tr class="border">
                    <td rowspan="{{data.length}}">
                        {{at}}
                    </td>
                    <td class="p-2">
                        {{data.0.name}} ({{data.0.qty}})
                    </td>
                    <td>
                        {{data.0.total}}
                    </td>
                </tr>
                {{#eachFrom data 1}}
                    <tr class="border">
                        <td class="p-2">
                            {{name}} ({{qty}})
                        </td>
                        <td>
                            {{total}}
                        </td>
                    </tr>
                {{/eachFrom}}
                <tr>
                    <td colspan="2" class="font-bold p-2">
                        Total
                    </td>
                    <td class="border-b-2">
                        {{total}}
                    </td>
                </tr>
            {{/each}}
        </table>
    </div>
    <div class="w-2/3 ">
        <canvas id="chart"></canvas>
    </div>
    <h1>Next Month: &pm; {{prediction}}</h1>
</div>
<script src="/node_modules/chart.js/dist/chart.umd.js"></script>
<script>
    const ctx = document.getElementById("chart");
    const mainChart = new Chart(ctx, {
        options: {
            tooltips: {
                mode: 'index',
                intersect: false
            },
            hover: {
                mode: 'index',
                intersect: false
            }
        },
        data: {
            labels: [
                {{#each graph}}
                    "{{at}}",
                {{/each}}
            ],
            datasets: [
                {
                    type: 'line',
                    label: 'prediction',
                    data: [
                        {{#each prediction_line}}
                            {{this}},
                        {{/each}}
                    ]
                },
                {
                    type: 'line',
                    label: 'Income by month',
                    data: [
                        {{#each graph}}
                            {{total}},
                        {{/each}}
                    ]
                },
            ]
        }
    });
</script>